{% extends "data_templates/panel.html" %}

{% block panel_title %}
    Early Birds:
    <div class="button-group filters-button-group">
        <button class="button is-checked" data-filter="*">All</button>
        <button class="button is-checked" data-filter=".DC">All</button>
    </div>
{% endblock %}
{% block panel_content %}
    <div class="grid" id="early_bird">
        {% for region, attendees in earlybirds %}
            <div class="early-bird-item {{ region }}">
                {{ region }}:
                <ul>
                    <li>Early Birds: {{ attendees[0] }}</li>
                    <li>Total Registered: {{ attendees[1] }}</li>
                    <li>% Early Bird: {{ "{:.2f}%".format((1 - (attendees[0]/attendees[1])) * 100) }}</li>
                </ul>
                <hr>
            </div>
        {% endfor %}
    </div>

    <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>

    <script>
        // init Isotope
        var $grid = $('.grid').isotope({
            itemSelector: '.element-item',
            layoutMode: 'fitRows'
        });

        // bind filter button click
        $('.filters-button-group').on('click', 'button', function () {
            var filterValue = $(this).attr('data-filter');
            console.log(filterValue)
            $grid.isotope({filter: filterValue});
        });
        // change is-checked class on buttons
        $('.button-group').each(function (i, buttonGroup) {
            var $buttonGroup = $(buttonGroup);
            $buttonGroup.on('click', 'button', function () {
                $buttonGroup.find('.is-checked').removeClass('is-checked');
                $(this).addClass('is-checked');
            });
        });
    </script>
{% endblock %}
